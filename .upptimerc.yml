# Upptime configuration for BandLab Upptime Monitoring System
owner: bandlab
repo: bandlab-upptime
user-agent: BandLab-Upptime

# Monitoring targets
sites:
  - name: BandLab
    url: https://www.bandlab.com
    slug: bandlab
    maxResponseTime: 5000
    icon: https://www.bandlab.com/web-app/images/favicons/favicon-48x48-53ec365b4b.png
  - name: BandLab User Page
    url: https://www.bandlab.com/bandlab
    slug: bandlab-user-page
    maxResponseTime: 2000
    icon: https://www.bandlab.com/web-app/images/favicons/favicon-48x48-53ec365b4b.png

assignees:
  - ebashmakov

status-website:
  name: BandLab Status
  logoUrl: https://www.bandlab.com/web-app/images/favicons/favicon-48x48-53ec365b4b.png
  cname: upptime.bandlab.com
  introTitle: "**BandLab** availability monitoring"
  robotsText: "User-agent: * \n Disallow: /"
  theme: light
  navbar:
    - title: Status
      href: /
    - title: BandLab
      href: https://www.bandlab.com

# Workflow schedules (cron syntax)
# GitHub Actions cannot run faster than every 5 minutes
#
# Data flow (sequenced to avoid race conditions):
#   1. uptime       → Checks status & collects response times (every 5 min)
#   2. responseTime → Aggregates response time data into summaries
#   3. graphs       → Generates PNG charts from aggregated data
#   4. summary      → Updates README.md with latest stats
#   5. staticSite   → Rebuilds status website with all updates
#
workflowSchedule:
  uptime: "*/5 * * * *"       # Every 5 min - core monitoring (collects response times)
  responseTime: "0 23 * * *"  # 11:00 PM UTC - aggregate response time data
  graphs: "15 23 * * *"       # 11:15 PM UTC - generate charts (after responseTime)
  summary: "30 23 * * *"      # 11:30 PM UTC - update README (after graphs)
  staticSite: "0 0 * * *"     # 12:00 AM UTC - rebuild site (after all updates)

notifications:
  slack:
    webhookUrl: ${{ secrets.SLACK_WEBHOOK_URL }}
